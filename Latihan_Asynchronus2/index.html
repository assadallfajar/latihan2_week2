<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Asynchronous</title>
</head>

<body>
    <h1> Get Pikachu!</h1>
    <button type="button" onclick="fetchData()">Get</button>
    <div id="data"></div>

    <script>
        async function fetchData() {
            const response = await fetch(" https://pokeapi.co/api/v2/pokemon?limit=30", {
                method: "GET"
            });

            const json = await response.json();
            const results = json.results;

            let = '';
            for (i = 0; i < results.length; i++) {
                data = data + `<p>${results[i].name}</p>`;

                detailResult = fetchData2(results[i].url);

            }

            async function fetchData2(url) {
                const response = await fetch(url, {
                    method: "GET"
                });

                const json = await response.json();
                const idData = json.id;
                const name = json.name;
                const imgPoke = json.sprites.back_default;
                const type = json.types[0].type.name;

                const getDiv = document.getElementById("data");
                const newPara1 = document.createElement("p");
                const newPara2 = document.createElement("p");
                const newImg = document.createElement("img");
                newImg.setAttribute("src", imgPoke);
                newPara1.innerHTML = `${idData}: ${name}`;
                newPara2.innerHTML = type;
                getDiv.append(newPara1);
                getDiv.append(newImg);
                getDiv.append(newPara2);
            }
            document.getElementById("data").innerHTML = data;
        }
    </script>
</body>

</html>